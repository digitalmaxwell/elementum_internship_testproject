(window.webpackJsonp=window.webpackJsonp||[]).push([["54ce"],{"19J2":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){var e=a("eOhz");return{page:e.default||e}}])},eOhz:function(e,t,a){"use strict";a.r(t);var s=a("0iUn"),r=a("sLSF"),n=a("MI3g"),c=a("a7VT"),i=a("AT/M"),o=a("Tit0"),u=a("vYYK"),l=(a("LpSC"),a("q1tI")),d=a.n(l),v=a("vDqi"),_=a.n(v),f=a("cr+I"),g=a.n(f),m=a("IP2g"),y=(a("H/sG"),a("I271"),a("bv8N")),h=a("vOzc"),b=(a("oTOh"),function(e){function t(e){var a;return Object(s.default)(this,t),a=Object(n.default)(this,Object(c.default)(t).call(this,e)),Object(u.a)(Object(i.default)(a),"search_movies",function(e){var t,s,r,n=!1;if(e&&(n=e.target.value),n||a.state.selected_genres[0]){if(t="search/movie?",s={api_key:y.a.key},n&&(s.query=n),""==n&&(n=!1),!n)return void a.setState({query:!1,query_results:a.state.discover},function(){a.sort_movies_by_genre()});a.setState({query:n})}else r=!0,t="discover/movie?",s={sort_by:"popularity.desc",api_key:y.a.key};console.log(a.state.query),s=g.a.stringify(s),_.a.get(y.a.base+t+s).then(function(e){a.setState({query_results:e.data.results}),a.state.selected_genres[0]&&a.sort_movies_by_genre(),r&&a.setState({discover:a.state.query_results}),a.state.genres[0]||(s={api_key:y.a.key},s=g.a.stringify(s),_.a.get(y.a.base+"genre/movie/list?"+s).then(function(e){a.setState({genres:e.data.genres})}))})}),Object(u.a)(Object(i.default)(a),"sort_movies_by_genre",function(){var e=[];if(!a.state.selected_genres[0])return a.setState({query_results:a.state.discover});for(var t in a.state.query_results){var s=a.state.query_results[t],r=void 0;for(var n in s.genre_ids)for(var c in a.state.selected_genres)s.genre_ids[n]!=a.state.selected_genres[c]||r||(r=!0,e.push(s))}console.log("sorted",e),a.setState({sorted:e})}),Object(u.a)(Object(i.default)(a),"add_genre",function(e){var t,s=a.state.selected_genres,r=e.target.value;for(var n in s)s[n]==r&&(t=n);t?s.splice(t,1):s.push(r),a.setState({selected_genres:s}),s[0]?a.sort_movies_by_genre():a.setState({sorted:!1})}),Object(u.a)(Object(i.default)(a),"generate_posters",function(){var e,t=[];if((e=a.state.sorted?a.state.sorted:a.state.query_results)[0])for(var s in e)t.push(d.a.createElement(h.a,{meta:e[s],key:s}));return t}),Object(u.a)(Object(i.default)(a),"generate_genres",function(){var e=[];for(var t in a.state.genres)e.push(d.a.createElement("div",null,d.a.createElement("input",{type:"checkbox",onClick:function(e){return a.add_genre(e)},value:a.state.genres[t].id}),d.a.createElement("span",null,a.state.genres[t].name)));return e}),a.state={query:!1,query_results:[],sorted:!1,genres:[],selected_genres:[],discover:[]},a}return Object(o.default)(t,e),Object(r.default)(t,[{key:"componentDidMount",value:function(){this.search_movies()}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"search"},d.a.createElement("div",{className:"nav"},d.a.createElement("div",{className:"left"},d.a.createElement("div",{className:"searchBar"},d.a.createElement(m.a,{icon:"search"}),d.a.createElement("input",{onChange:function(t){return e.search_movies(t)}})))),d.a.createElement("div",{className:"sort_movies"},d.a.createElement("div",{className:"sort_box"},d.a.createElement("div",{className:"header"},d.a.createElement("h3",null,"Genre")),this.generate_genres())),d.a.createElement("div",{className:"movie_posters"},d.a.createElement("div",{className:"container"},this.generate_posters())))}}]),t}(l.Component));t.default=b}},[["19J2","5d41","9da1","ad9d"]]]);