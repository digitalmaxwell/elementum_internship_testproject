(window.webpackJsonp=window.webpackJsonp||[]).push([["54ce"],{"19J2":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){var e=a("eOhz");return{page:e.default||e}}])},eOhz:function(e,t,a){"use strict";a.r(t);var s=a("0iUn"),r=a("sLSF"),n=a("MI3g"),c=a("a7VT"),i=a("AT/M"),u=a("Tit0"),l=a("vYYK"),o=(a("LpSC"),a("q1tI")),d=a.n(o),v=a("vDqi"),_=a.n(v),g=a("cr+I"),m=a.n(g),f=a("IP2g"),h=(a("H/sG"),a("I271"),a("bv8N")),p=a("vOzc"),y=(a("oTOh"),function(e){function t(e){var a;return Object(s.default)(this,t),a=Object(n.default)(this,Object(c.default)(t).call(this,e)),Object(l.a)(Object(i.default)(a),"search_movies",function(e){var t,s,r,n=!1;e&&(n=e.target.value),n||a.state.selected_genres[0]?(t="search/movie?",s={with_genres:a.state.selected_genres.join(","),api_key:h.a.key},n&&(s.query=n)):(r=!0,t="discover/movie?",s={sort_by:"popularity.desc",api_key:h.a.key}),s=m.a.stringify(s),_.a.get(h.a.base+t+s).then(function(e){a.setState({query_results:e.data.results}),r&&a.setState({discover:a.state.query_results}),a.state.genres[0]||(s={api_key:h.a.key},s=m.a.stringify(s),_.a.get(h.a.base+"genre/movie/list?"+s).then(function(e){a.setState({genres:e.data.genres})}))})}),Object(l.a)(Object(i.default)(a),"sort_movies_by_genre",function(){var e=[];if(!a.state.selected_genres[0])return a.setState({query_results:a.state.discover});for(var t in a.state.query_results){var s=a.state.query_results[t];for(var r in s.genre_ids)for(var n in a.state.selected_genres)s.genre_ids[r]==a.state.selected_genres[n]&&e.push(s)}return a.setState({query_results:e})}),Object(l.a)(Object(i.default)(a),"add_genre",function(e){var t,s=a.state.selected_genres,r=e.target.value;for(var n in s)s[n]==r&&(t=n);t?s.splice(t,1):s.push(r),a.setState({selected_genres:s}),a.sort_movies_by_genre()}),Object(l.a)(Object(i.default)(a),"generate_posters",function(){var e=[];for(var t in a.state.query_results)e.push(d.a.createElement(p.a,{meta:a.state.query_results[t],key:t}));return e}),Object(l.a)(Object(i.default)(a),"generate_genres",function(){var e=[];for(var t in a.state.genres)e.push(d.a.createElement("div",null,d.a.createElement("input",{type:"checkbox",onClick:function(e){return a.add_genre(e)},value:a.state.genres[t].id}),d.a.createElement("span",null,a.state.genres[t].name)));return e}),a.state={query_results:[],genres:[],selected_genres:[],discover:[]},a}return Object(u.default)(t,e),Object(r.default)(t,[{key:"componentDidMount",value:function(){this.search_movies()}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"search"},d.a.createElement("div",{className:"nav"},d.a.createElement("div",{className:"left"},d.a.createElement("div",{className:"searchBar"},d.a.createElement(f.a,{icon:"search"}),d.a.createElement("input",{onChange:function(t){return e.search_movies(t)}})))),d.a.createElement("div",{className:"sort_movies"},d.a.createElement("div",{className:"sort_box"},d.a.createElement("div",{className:"header"},d.a.createElement("h3",null,"Genre")),this.generate_genres())),d.a.createElement("div",{className:"movie_posters"},d.a.createElement("div",{className:"container"},this.generate_posters())))}}]),t}(o.Component));t.default=y}},[["19J2","5d41","9da1","ad9d"]]]);